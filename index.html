<!DOCTYPE html>
<script src="js/aframe.min.js"></script>
<!-- include aframe-ar.js -->
<script src="js/aframe-ar.js"></script>

<script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
<script src="//vjs.zencdn.net/5.19/video.js"></script>

<style type="text/css">
	
#arjsDebugUIContainer 
{
   display: none; !important;
}
	
.a-enter-vr-button
{
   display: none; !important;		
}
</style>

<body style='margin : 0px; overflow: hidden; font-family: Monospace;'>


<a-scene id="scene" embedded arjs='sourceType: webcam;'>
	
	<a-assets> 
    <video id="video"  src="https://instagram.fmad8-1.fna.fbcdn.net/vp/6b901063436fad727172622d330b2bbf/5C6645DD/t50.2886-16/51996177_1301167906697989_2116970954788700160_n.mp4?_nc_ht=instagram.fmad8-1.fna.fbcdn.net" 
    <!-- webkit-playsinline  
    crossOrigin="anonymous"-->
    type="video/mp4"
    poster="https://instagram.fmad7-1.fna.fbcdn.net/vp/dbcd3714bea09773226546e0fbc56f17/5C2ADC82/t51.2885-15/e35/46552306_378004282983459_4023662717802556687_n.jpg?_nc_ht=instagram.fmad7-1.fna.fbcdn.net"
    <!-- autoplay="true"
    loop="true"-->
    controls ></video>
	  <img id="play-image" src="btn-play_video.png" transparent="true">
	 
 	</a-assets>
	
	<a-video id="vid" preload="true" src="#video" width="1.8" height="1" position="0 0 0" rotation="270 0 0"  event-set__enter="_event: mouseenter; width: 1.8; height: 1;" event-set__touchstart="_event: touchstart; width: 1.8; height: 1;"
            event-set__leave="_event: mouseleave;  width: 1.8; height: 1;">
	    <a-image id="play" src="#play-image" width="0.4" height="0.4" position="0 0 0.1" transparent="true" material="alphaTest: 0.5" data-clickable visible="true" onclick="dosomething()"></a-image>

	</a-video>

		<!--<a-sphere position="0 0.5 0" radius="0.5" color="#EF2D5E"></a-sphere>
		<a-plane position="0 0 0" rotation="-90 0 0" width="1" height="1" color="#7BC8A4"></a-plane>
		
		<a-image position="0 0 0" rotation="90 180 0" height="1" width="1"  src="https://raw.githubusercontent.com/ToniNP95/mattGraphics/master/red-dot.png"></a-image>
		
		<a-image position="0 0.2 0" rotation="270 0 0" height="1" width="1"  src="https://raw.githubusercontent.com/ToniNP95/mattGraphics/master/matt-face.png"></a-image> 
		
		<a-image position="0 0.4 0" rotation="270 0 0" height="1" width="1"  src="https://raw.githubusercontent.com/ToniNP95/mattGraphics/master/hello-you-text.png"></a-image>--> 

		  <!--<a-marker-camera preset='custom' type='pattern' url='https://raw.githubusercontent.com/ToniNP95/AR_resources/blob/master/pattern-marker.patt'></a-marker-camera>-->
	<a-marker-camera id="camera" preset='custom' type='pattern' url='https://raw.githubusercontent.com/ToniNP95/AR_resources/master/trex070.patt'></a-marker-camera>

		  
		  
	</a-scene>

<script>
	var scene=document.getElementById("scene");
	var video=document.getElementById("vid");
	var play=document.getElementById("play");
	//var mark=document.getElementById("marker");
	var camera=document.getElementById("camera");
	var i=0;
	
function bucle() {
  requestAnimationFrame( bucle );
  //alert("bucle");
}
bucle();
 //var scene = document.querySelector('a-scene');
camera.addEventListener('componentchanged', function (evt) {
  if (evt.name === 'rotation') {
    console.log('Entity has rotated from', evt.oldData, 'to', evt.newData, '!');
    //alert('Entity has rotated from', evt.oldData, 'to', evt.newData, '!');
  }
});	
scene.onload=run();
		
function run () {
  requestAnimationFrame( run );
  //var entity = document.getElementById('debugBox');
        /*var position=mark.getAttribute('position');
	//alert("actualizando pos");
	video.setAttribute('position',position);*/
	//scene.object3D.updateMatrixWorld();
	//var position	= THREEx.ObjCoord.worldPosition(mark.object3D);
	//video.setAttribute('position',position);
	//alert("running");
	
	 if(document.getElementById("video").paused)
 {	 
	play.setAttribute("visible","true");
 }
}
	
   function dosomething(){
	   alert("patata");
	play.setAttribute("visible","false");
	//document.getElementById("vid").play();
	document.getElementById("video").play();
	   
	alert("patata"); 
   }
  document.getElementById("vid").addEventListener("mouseenter",function(){
	  dosomething();
  },false);
	  document.getElementById("vid").addEventListener("touchstart",function(){
	  dosomething();
  },false);
	
</script>
	
	
	
	
</body>
</html>
